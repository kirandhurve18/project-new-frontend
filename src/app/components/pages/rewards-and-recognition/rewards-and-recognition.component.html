<div class="container-fluid px-3">
  <!-- Rewards & Recognition Header -->
  <div class="row">
    <div class="col-12 mt-3">
      <div class="bg-white rounded shadow-sm px-3 py-3 d-flex justify-content-between align-items-center flex-wrap">
        <!-- Left Title -->
        <h5 class="fw-bold mb-0">Rewards & Recognition</h5>

        <!-- Right Controls -->
        <div class="d-flex gap-2">
          <!-- Dropdown -->
          <div class="dropdown">
            <button
              class="btn btn-light dropdown-toggle"
              type="button"
              id="winnersDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              {{ selectedCategory }}
            </button>
            <ul class="dropdown-menu" aria-labelledby="winnersDropdown">
              <li><a class="dropdown-item" (click)="setCategory('Monthly Winners')">Monthly Winners</a></li>
              <li><a class="dropdown-item" (click)="setCategory('Quarterly Winners')">Quarterly Winners</a></li>
              <li><a class="dropdown-item" (click)="setCategory('Yearly Winners')">Yearly Winners</a></li>
              <li><a class="dropdown-item" (click)="setCategory('Iconic Winners')">Iconic Winners</a></li>
            </ul>
          </div>

          <!-- Add Winners Button -->
          <button *ngIf="userRole == '1'"
            class="btn btn-teal text-white"
            data-bs-toggle="modal"
            data-bs-target="#addWinnerModal">
            Add Winners
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Winners Section -->
  <div class="row mt-4 gx-4">
    <!-- Left Section (Leaders & Performers) -->
    <div class="col-12 col-lg-8 mb-4">
      
      <!-- Leader of the Month -->
      <div class="card shadow-sm rounded p-4 mb-4 w-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="text-muted fs-4">Leader of the Month</h5>
            <a href="#" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#leaderModal">View All</a>
          </div>

          <div class="d-flex flex-wrap gap-4">
            <ng-container *ngFor="let leader of leaders">
              <div class="text-center">
                <div class="border border-2 rounded-3 p-2" style="width: 120px; height: 120px">
                  <img
                    [src]="leader.imageUrl || 'assets/images/NA image.png'"
                    alt="{{ leader.name || 'Who\'s Next?' }}"
                    class="img-fluid rounded"
                    style="height: 100%; object-fit: cover"
                  />
                </div>
<div class="mt-2 fw-bold fs-4">{{ leader.name }}</div>
<div class="text-muted fs-4">{{ leader.designation }}</div>
<div class="text-muted fs-4">{{ leader.month }}</div>

              </div>
            </ng-container>
          </div>
        </div>
      </div>

      <!-- Performer of the Month -->
      <div class="card shadow-sm rounded p-4 w-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="text-muted fs-4">Performer of the Month</h5>
            <a href="#" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#performerModal">View All</a>
          </div>

          <div class="d-flex flex-wrap gap-4">
            <ng-container *ngFor="let performer of performers">
              <div class="text-center">
                <div class="border border-2 rounded-3 p-2" style="width: 120px; height: 120px">
                  <img
                    [src]="performer.imageUrl || 'assets/images/NA image.png'"
                    alt="{{ performer.name || 'assets/images/NA image.png' }}"
                    class="img-fluid rounded"
                    style="height: 100%; object-fit: cover"
                  />
                </div>
                <div class="mt-2 fw-bold fs-4">{{ performer.name || "Who‚Äôs Next ?" }}</div>
                <div class="text-muted fs-4">{{ performer.designation || '-' }}</div>
                <div class="text-muted fs-4">{{ performer.month || '-' }}</div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Section (Winners Highlight) -->
    <div class="col-12 col-lg-4 mb-4">
      <div class="card shadow-sm rounded p-4 w-100" style="min-height: 662px;">
        <div class="card-body">
          <div class="text-center mb-4">
            <h5 class="fw-bold">üèÜ Winners for {{ currentMonth }} {{ currentYear }} üèÜ</h5>
          </div>

          <!-- Leader Winner -->
  <div class="text-center mb-4 p-3 rounded"
     style="background-image: url('assets/images/color.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 250px;">
  <h6 class="fw-bold text-black fs-5">Leader of the Month</h6>
  <div class="d-flex justify-content-center mb-2">
    <div class="rounded-circle overflow-hidden border border-warning border-3" style="width: 100px; height: 100px">
      <img
        [src]="monthlyWinner?.leader?.imageUrl || 'assets/next.svg'"
        alt="{{ monthlyWinner?.leader?.name || 'Who\'s Next?' }}"
        class="img-fluid"
        style="object-fit: cover; width: 100%; height: 100%"
      />
    </div>
  </div>
  <p class="text-muted fs-5">{{ monthlyWinner?.leader?.designation || '-' }}</p>
</div>

          <hr />

          <!-- Performer Winner -->
          <div class="text-center p-3 rounded" style="background-image: url('assets/images/color.png'); background-size: cover">
            <h6 class="fw-bold text-black fs-5">Performer of the Month</h6>
            <div class="d-flex justify-content-center mb-2">
              <div class="rounded-circle overflow-hidden border border-warning border-3" style="width: 100px; height: 100px">
                <img
                  [src]="monthlyWinner?.performer?.imageUrl || 'assets/next.svg'"
                  alt="{{ monthlyWinner?.performer?.name || 'Who\'s Next?' }}"
                  class="img-fluid"
                  style="object-fit: cover; width: 100%; height: 100%"
                />
              </div>
            </div>
            <p class="text-muted fs-5">{{ monthlyWinner?.performer?.designation || '-' }}</p>
            <p class="text-muted small">{{ monthlyWinner?.performer?.department || '-' }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Winner Modal -->
<div class="modal fade" id="addWinnerModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content rounded-3 shadow-lg border-0">
      
      <!-- Header -->
      <div class="modal-header" style="background-color: #009688;">
        <h5 class="modal-title fw-bold text-white">Add Winner</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Body -->
      <div class="modal-body px-4 py-3">
        <form>
<div class="mb-3">
  <label class="form-label fw-semibold">Employee Name :</label>
  <select class="form-select rounded-pill"
          (change)="onEmployeeSelect($event)">
    <option selected disabled>Select Employee Name</option>
    <option *ngFor="let emp of employees" [value]="emp._id">
      {{ emp.full_name }}
    </option>
  </select>
</div>



<!-- Employee Designation -->
<!-- Designation -->
<div class="mb-3">
  <label class="form-label fw-semibold">Employee Designation :</label>
  <select class="form-select rounded-pill" [(ngModel)]="selectedDesignation">
    <option disabled selected>Select Designation</option>
    <option *ngFor="let d of designations" [value]="d.designation_name">
      {{ d.designation_name }}
    </option>
  </select>
</div>

<!-- Department -->
<div class="mb-3">
  <label class="form-label fw-semibold">Employee Department :</label>
  <select class="form-select rounded-pill" [(ngModel)]="selectedDepartment">
    <option disabled selected>Select Department</option>
    <option *ngFor="let dept of departments" [value]="dept._id">
      {{ dept.department_name || dept.designation_name }}
    </option>
  </select>
</div>



          <!-- RNR Category -->
          <div class="mb-3">
            <label class="form-label fw-semibold">RNR Category :</label>
            <select class="form-select rounded-pill">
              <option selected disabled>Select Reward Category</option>
              <option>Leader of the Month</option>
              <option>Performer of the Month</option>
              <option>Quarterly Winner</option>
              <option>Yearly Winner</option>
            </select>
          </div>

          <!-- Upload Image -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Upload Employee Image :</label>
            <input type="file" class="form-control rounded-pill" />
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn text-white px-4" style="background-color: #e74c3c; border-radius: 2rem;" data-bs-dismiss="modal">
          Close
        </button>
        <button type="submit" class="btn text-white px-4" style="background-color: #27ae60; border-radius: 2rem;">
          Submit
        </button>
      </div>

    </div>
  </div>
</div>


<!-- Leader Modal -->
<div class="modal fade" id="leaderModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content rounded-3 shadow-lg border-0">

<div class="modal-header text-white" style="background-color: #009688;">
  <h5 class="modal-title fw-bold">Leader of the Month</h5>
  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
      <!-- Body -->
      <div class="modal-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <button class="btn btn-outline-primary btn-sm" (click)="prevYear('leader')">&laquo;</button>
          <h5 class="fw-bold mb-0">{{ selectedYear }}</h5>
          <button class="btn btn-outline-primary btn-sm" (click)="nextYear('leader')">&raquo;</button>
        </div>

        <div class="row g-4">
          <div class="col-6 col-md-3" *ngFor="let leader of leadersByYear[selectedYear]">
            <div class="text-center">
              <div class="border border-2 rounded-3 p-2" style="width: 120px; height: 120px; margin: auto;">
                <img [src]="leader.imageUrl || 'assets/images/next.png'"
                     alt="{{ leader.name }}"
                     class="img-fluid rounded"
                     style="height: 100%; object-fit: cover;">
              </div>
              <div class="mt-2 fw-bold">{{ leader.name }}</div>
              <div class="small text-muted">{{ leader.designation }}</div>
              <div class="small text-muted">{{ leader.month }}</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<!-- Performer Modal -->
<div class="modal fade" id="performerModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content rounded-3 shadow-lg border-0">

      <!-- Header -->
<div class="modal-header text-white" style="background-color: #009688;">
  <h5 class="modal-title fw-bold">Performer of the Month</h5>
  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>


      <!-- Body -->
      <div class="modal-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <button class="btn btn-outline-success btn-sm" (click)="prevYear('performer')">&laquo;</button>
          <h5 class="fw-bold mb-0">{{ selectedYear }}</h5>
          <button class="btn btn-outline-success btn-sm" (click)="nextYear('performer')">&raquo;</button>
        </div>

        <div class="row g-4">
          <div class="col-6 col-md-3" *ngFor="let performer of performersByYear[selectedYear]">
            <div class="text-center">
              <div class="border border-2 rounded-3 p-2" style="width: 120px; height: 120px; margin: auto;">
                <img [src]="performer.imageUrl || 'assets/images/next.png'"
                     alt="{{ performer.name }}"
                     class="img-fluid rounded"
                     style="height: 100%; object-fit: cover;">
              </div>
              <div class="mt-2 fw-bold">{{ performer.name }}</div>
              <div class="small text-muted">{{ performer.designation }}</div>
              <div class="small text-muted">{{ performer.month }}</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


